!function(){"use strict";var e,t,s,n,o={404:function(e,t){t.Z={methods:{T(e,t){return _T(e,t)||t},format(...e){return String.format.apply(String,e)},htmlEncode(e){return e?String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e},htmlDecode(e){return e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&"):e}}}},409:function(e,t,s){s.d(t,{Z:function(){return r}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"login-button",class:e.buttonClass,attrs:{type:"button"},on:{click:e.onClick}},[s("transition",{attrs:{name:"fade"}},[e.spin?s("spinner",{staticClass:"login-spinner"}):s("span",{staticClass:"text"},[e._t("default")],2)],1),e._v(" "),s("span",{staticClass:"invisible"},[e._t("default")],2)],1)};n._withStripped=!0;var o={components:{Spinner:s(719).Z},props:{disabled:Boolean,color:{type:String,default:"blue"},size:{type:String,default:""},spin:{type:Boolean,default:!1}},computed:{buttonClass(){return[{[`login-button-${this.color}`]:this.color},{[`login-button-${this.size}`]:this.size},{disable:this.disabled},{spin:this.spin}]}},methods:{onClick(e){this.disabled||this.spin||this.$emit("click",e)}}},i=(0,s(810).Z)(o,n,[],!1,null,null,null);i.options.__file="src/components/loginButton.vue";var r=i.exports},719:function(e,t,s){s.d(t,{Z:function(){return i}});var n=function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"login-spinner",attrs:{viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{staticClass:"login-spinner-g"},[t("circle",{staticClass:"login-spinner-circle",attrs:{cx:"33",cy:"33","stroke-width":5,r:30.5}})])])};n._withStripped=!0;var o=(0,s(810).Z)({},n,[],!1,null,null,null);o.options.__file="src/components/spinner.vue";var i=o.exports},527:function(e,t,s){s.d(t,{Z:function(){return r}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-textfield-wrapper"},[s("div",{staticClass:"login-textfield",class:{error:e.error}},[s("span",{class:e.icon,style:e.iconStyles}),e._v(" "),s("div",{staticClass:"input-container"},[s("input",{ref:"input",class:{"has-after-input":e.$slots["after-input"]},attrs:{"syno-id":e.synoId,type:e.type,placeholder:e.placeholder,enterkeyhint:e.enterkeyhint,autofocus:!!e.autofocus,name:e.autofillname,autocomplete:"off",disabled:e.disabled,tabindex:e.tabindex},domProps:{value:e.value},on:{focus:e.onFocus,input:e.onInput,keydown:e.onKeydown}}),e._v(" "),e._t("after-input")],2),e._v(" "),s("div",{staticClass:"border active-border",style:{background:e.bordercolor}}),e._v(" "),s("div",{staticClass:"border bottom-border"}),e._v(" "),s("div",{staticClass:"border error-border"})]),e._v(" "),e.withStrength?s("div",{directives:[{name:"show",rawName:"v-show",value:e.passwordStrenghLevel>-1,expression:"passwordStrenghLevel > -1"}],class:[{"login-password-strength":!0},{weak:0===e.passwordStrenghLevel},{medium:1===e.passwordStrenghLevel},{strong:2===e.passwordStrenghLevel}]},[s("div",{staticClass:"strength-block block-1"}),e._v(" "),s("div",{staticClass:"strength-block block-2"}),e._v(" "),s("div",{staticClass:"strength-block block-3"}),e._v(" "),s("span",[e._v(e._s(e.passwordStrengthText))])]):e._e()])};n._withStripped=!0;var o={props:{value:{type:String,default:""},enterkeyhint:{type:String,default:""},type:{type:String,default:""},icon:{type:Object,default(){return{}}},iconUri:{type:String,default:""},placeholder:{type:String,default:""},autofocus:Boolean,bordercolor:{type:String,default:""},autofillname:{type:String,default:""},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0},synoId:{type:String,default:""},withStrength:{type:Boolean,default:!1}},data(){return{error:!1,passwordStrenghLevel:-1}},computed:{iconStyles(){let e={};return this.iconUri&&(e.backgroundImage="url("+this.iconUri+")"),e},passwordStrengthText(){const e=[_T("welcome","passwd_weak"),_T("welcome","passwd_medium"),_T("welcome","passwd_strong")];return this.passwordStrenghLevel<0||e.length<=this.passwordStrenghLevel?"":e[this.passwordStrenghLevel]}},watch:{value:((e,t=250)=>{let s;return function(...n){clearTimeout(s),s=setTimeout((()=>{clearTimeout(s),e.apply(this,n)}),t)}})((function(e=""){this.validate(),this.checkPasswordStrength()}),250)},methods:{onFocus(e){this.$emit("focus",e)},onInput(e){this.$emit("input",e.target.value)},onKeydown(e){"Enter"===e.key&&this.$emit("submit")},focus(){this.$refs.input.focus()},validate(){if(void 0!==this.value)return"password"===this.type||(this.error=!this.value,!this.error)},async checkPasswordStrength(){"password"===this.type&&this.withStrength&&(this.passwordStrenghLevel=await this.getPasswordStrengthLevel(this.value))},async getPasswordStrengthLevel(e=""){const{score:t}=await synowebapi.promises.request({api:"SYNO.Core.User.PasswordMeter",method:"evaluate",version:"1",encryption:["password"],params:{password:e}});return Math.floor(t/2)}}},i=(0,s(810).Z)(o,n,[],!1,null,null,null);i.options.__file="src/components/textfield.vue";var r=i.exports},909:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-page-common-layout-container login-reset-forgot-password"},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s(e.step,{tag:"component",on:{"goto-step":e.onGotoStep}})],1)],1)};n._withStripped=!0;var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-perfect-scrollbar",[s("div",{staticClass:"step-change-pwd login-page-common-layout"},[s("div",{staticClass:"area-top"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[e._v("\n          "+e._s(e.T("login","change_pass_title"))+"\n        ")]),e._v(" "),s("div",{staticClass:"desc"},[e._v("\n          "+e._s(e.T("login","change_pass_desc"))+"\n        ")])])]),e._v(" "),s("div",{staticClass:"area-center"},[s("form",{staticClass:"common-simple-form"},[s("textfield",{ref:"newPass",attrs:{"with-strength":"",type:"password",placeholder:e.T("login","forget_pass_new_password")},on:{submit:e.onSubmit},model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}}),e._v(" "),s("textfield",{ref:"confirmPass",attrs:{type:"password",placeholder:e.T("login","forget_pass_comfirm_password")},on:{submit:e.onSubmit},model:{value:e.confirmPass,callback:function(t){e.confirmPass=t},expression:"confirmPass"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.confirmPassError,expression:"confirmPassError !== ''"}],staticClass:"confirm-pass-error",domProps:{innerHTML:e._s(e.confirmPassError)}}),e._v(" "),s("login-button",{attrs:{disabled:0==e.newPass.length||0==e.confirmPass.length||e.disableSubmit,spin:e.loading},on:{click:e.onSubmit}},[e._v("\n          "+e._s(e.T("login","submit"))+"\n        ")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.msgShow,expression:"msgShow"}],staticClass:"msg",class:e.msgCls},[s("div",{staticClass:"text",domProps:{innerHTML:e._s(e.msgText)}})])],1)]),e._v(" "),s("div",{staticClass:"area-bottom"},[s("p",[e._v(e._s(e.T("login","copyright").replace("{0}",(new Date).getFullYear())))])])])])};o._withStripped=!0;var i=s(404),r=s(527),a=s(409),l={components:{textfield:r.Z,"login-button":a.Z},mixins:[i.Z],data(){return{disableSubmit:!1,newPass:"",confirmPass:"",confirmPassError:"",msgText:"",msgCls:"",msgShow:!1,loading:!1}},computed:{key(){return this.$route.params.key}},watch:{confirmPassError(e){this.$refs.confirmPass.error=""!==e}},mounted(){this.$refs.newPass.focus()},methods:{onSubmit:function(){this.confirmPassError="",this.msgShow=!1,this.newPass===this.confirmPass?(this.loading=!0,this.disableSubmit=!0,synowebapi.request({api:"SYNO.Auth.ForgotPwd",version:1,method:"reset",params:{passwd:this.newPass,key:this.key},encryption:["passwd","key"],callback:function(e,t){var s=this.parseResponse(t);s.success?this.$emit("goto-step","step-change-success"):(this.setError(s.msg),this.loading=!1,this.disableSubmit=!1)},scope:this})):this.confirmPassError=this.T("login","forget_pass_comfirm_password_error")},parseResponse:function(e){var t=this.T("login","forget_pass_msg_error"),s=!1,n=e.msg,o=[];return"success"===n?(s=!0,t=this.T("login","forget_pass_change_pass_ok")):"weak password"===n?(o=[this.T("login","password_formation_rules"),this.T("login","need_longer_password"),this.T("login","exclude_username")],t=this.T("login","possible_reasons_are").replace("{0}",`<br/>${this.printUnorderedListTags(o)}`)):"weak password domain"===n?(o=[this.T("login","password_formation_rules"),this.T("login","need_longer_password"),this.T("login","exclude_common_password")],t=this.T("login","possible_reasons_are").replace("{0}",`<br/>${this.printUnorderedListTags(o)}`)):"ticket failed"===n?t=this.T("login","forget_pass_msg_incorrect_ticket"):n&&(t=this.T("login",n)||this.T("login","forget_pass_msg_error")),{success:s,msg:t}},setError:function(e,t){this.msgText=e||this.T("login","error_error_system"),this.msgCls=t||"error",this.msgShow=!0},setMsg:function(e,t){this.msgText=e,this.msgCls=t||"",this.msgShow=!0},printUnorderedListTags:function(e){return`<ul align="left">${e.reduce(((e,t)=>`${e}<li>${t}</li>`),"")}</ul>`}}},c=s(810),d=(0,c.Z)(l,o,[],!1,null,null,null);d.options.__file="src/components/resetforgotpwd/stepChangePwd.vue";var u=d.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-perfect-scrollbar",[s("div",{staticClass:"step-change-success login-page-common-layout"},[s("div",{staticClass:"area-top"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[e._v("\n          "+e._s(e.T("login","change_success_title"))+"\n        ")]),e._v(" "),s("div",{staticClass:"desc"},[e._v("\n          "+e._s(e.T("login","change_success_desc"))+"\n        ")])])]),e._v(" "),s("div",{staticClass:"area-center"},[s("div",{staticClass:"img-new-password-success"}),e._v(" "),s("login-button",{staticClass:"btn-login-now",on:{click:e.gotoLogin}},[e._v("\n        "+e._s(e.T("login","login_now"))+"\n      ")])],1),e._v(" "),s("div",{staticClass:"area-bottom"},[s("p",[e._v(e._s(e.T("login","copyright").replace("{0}",(new Date).getFullYear())))])])])])};p._withStripped=!0;var g={components:{"login-button":a.Z},mixins:[i.Z],methods:{gotoLogin:function(){window.location="/"}}},m=(0,c.Z)(g,p,[],!1,null,null,null);m.options.__file="src/components/resetforgotpwd/stepChangeSuccess.vue";var h={components:{"step-change-pwd":u,"step-change-success":m.exports},data(){return{step:"step-change-pwd"}},methods:{onGotoStep:function(e){this.step=e}}},S=(0,c.Z)(h,n,[],!1,null,null,null);S.options.__file="src/pages/resetForgotPwdPage.vue";var f=S.exports},810:function(e,t,s){function n(e,t,s,n,o,i,r,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}s.d(t,{Z:function(){return n}})},311:function(e){e.exports=Vue},294:function(e){e.exports=Vuex}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var s=i[e]={exports:{}};return o[e](s,s.exports,r),s.exports}r.m=o,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,s){return r.f[s](e,t),t}),[]))},r.u=function(e){return"dsm.login.bundle."+{1:"b55fe1527944f266747a",207:"89c5c630b002c4a3f234",244:"63d998ee285753fd1bf2",586:"d841632347787d1276df",715:"fe21b5aa11cdda03deeb",772:"41fc71df806bc347c84d",834:"64606fe68d496ba7ad6f",933:"75db8292717fc5672ab5"}[e]+"."+e+".js"},r.miniCssF=function(e){return e+".style.css"},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="dsm-login:",r.l=function(s,n,o,i){if(e[s])e[s].push(n);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+o),a.src=s),e[s]=[n];var p=function(t,n){a.onerror=a.onload=null,clearTimeout(g);var o=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(n)})),t)return t(n)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="./webman/login/dist/",s=function(e){return new Promise((function(t,s){var n=r.miniCssF(e),o=r.p+n;if(function(e,t){for(var s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var o=(r=s[n]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(o===e||o===t))return r}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){var r;if((o=(r=i[n]).getAttribute("data-href"))===e||o===t)return r}}(n,o))return t();!function(e,t,s,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=function(i){if(o.onerror=o.onload=null,"load"===i.type)s();else{var r=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=a,o.parentNode.removeChild(o),n(l)}},o.href=t,document.head.appendChild(o)}(e,o,t,s)}))},n={179:0},r.f.miniCss=function(e,t){n[e]?t.push(n[e]):0!==n[e]&&{207:1,586:1,772:1}[e]&&t.push(n[e]=s(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))},function(){var e={179:0};r.f.j=function(t,s){var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var o=new Promise((function(s,o){n=e[t]=[s,o]}));s.push(n[2]=o);var i=r.p+r.u(t),a=new Error;r.l(i,(function(s){if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,n[1](a)}}),"chunk-"+t,t)}};var t=function(t,s){var n,o,i=s[0],a=s[1],l=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);l&&l(r)}for(t&&t(s);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},s=self.wpJsonpLogin=self.wpJsonpLogin||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}(),function(){var e=r(311),t=r.n(e),s=r(294),n=r.n(s),o=VueRouter,i=r.n(o),a={state:{isNeedPersonalUpdater:!1,tpl:{},appLoginStyle:"",email:"",isSpecificAccount:!1,isSupportSSO:!1,isSupportSSOSAML:!1,isSupportOIDCSSO:!1,isSupportSSOCAS:!1,otpUrl:null,stayLogin:!1,trustDevice:!1,showOTPField:!1,message:"",messageStyle:"info",needReloadTabs:!1,activeTabName:"",disableForm:!1,showUpgradeMask:!0,onLoginProcedure:!1,isSpinning:!1,isBombingOnDone:!1,loadPluginsPromise:Promise.resolve(),loginPluginsLoaded:!1,dsmForm:{username:"",password:"",SSOToken:"",OTPcode:""},authList:[],need2FA:!1,selectAuthType:"",isUseSSO:!1,saml:{isUse:!1,response:""},cas:{isUse:!1,ticket:"",redirect_url:""},oidc:{isUse:!1,params:{}}},actions:{async fetchAuthList({dispatch:e,state:t,commit:s},n=""){let o;try{o=await synowebapi.promises.request({url:"webapi/entry.cgi",requestFormat:"raw",params:{api:"SYNO.API.Auth.Type",method:"get",version:1,account:n}})}catch(e){SYNO.Debug.error(e)}Array.isArray(o)&&o.length>0||(o=[{type:"passwd"}]),localStorage.removeItem("choseAuthType");let i=SYNO.SDS.PreferAuthType.Get(n);return i&&o.sort(((e,t)=>e.type===i?-1:t.type==i?1:0)),s("updateDsmUsername",n),await e("setAuthList",o),t.enabledAuthList},updateTpl({commit:e},t){e("updateTpl",new SYNO.SDS.LoginStyleParser({isPreview:t}).getLoginConfig())},updateAppLoginStyle({commit:e}){SYNO.SDS.Session.appLoginStyle&&e("updateAppLoginStyle",SYNO.SDS.Session.appLoginStyle)},switchToTab({commit:e},t){e("updateActiveTabName",t),e("updateNeedReloadTabs",!0)},setErrorMessage({commit:e},t){e("updateMessage",t),e("updateMessageStyle","error")},setInfoMessage({commit:e},t){e("updateMessage",t),e("updateMessageStyle","info")},clearMessage({commit:e}){e("updateMessage",""),e("updateMessageStyle","info")},loginPluginsLoaded({commit:e},t){e("loginPluginsLoaded",t)},async setAuthList({commit:e,state:t},s=[]){e("updateAuthList",s)},setNeed2FA({commit:e},t){e("need2FA",t)},clearAuthInfo({commit:e}){e("need2FA",!1),e("updateAuthList",[]),e("updateDsmPassword",""),e("updateDsmSSOToken",""),e("updateDsmOTPcode",""),e("updateShowOTPField",!1),e("updateStayLogin",!1),e("updateTrustDevice",!1),e("updateIsUseSSO",!1),e("updateIsUseSSOSAML",!1),e("updateSamlResponse",""),e("updateIsUseSSOCAS",!1),e("updateCasTicket",""),e("updateCasRedirectUrl",""),e("updateOidcIsUse",!1),e("updateOidcParams",{})},async needPersonalUpdate({commit:e}){const t=await synowebapi.promises.request({api:"SYNO.Core.Desktop.PersonalUpdater",method:"need_update",version:1}),s=SYNO.SDS.isCompatibleMode&&SYNO.SDS.isCompatibleMode();e("updatePersonalUpdater",t.need_update&&!s)}},mutations:{updateTpl(e,t){e.tpl=t},updateMessage(e,t){e.message=t},updateMessageStyle(e,t){e.messageStyle=t},updateSupportSSO(e,t){e.isSupportSSO=t},updateSupportSSOSAML(e,t){e.isSupportSSOSAML=t},updateSupportSSOCAS(e,t){e.isSupportSSOCAS=t},updateSupportOIDCSSO(e,t){e.isSupportOIDCSSO=t},updateDsmUsername(e,t){e.dsmForm.username=t},updateDsmPassword(e,t){e.dsmForm.password=t},updateDsmSSOToken(e,t){e.dsmForm.SSOToken=t},updateDsmOTPcode(e,t){e.dsmForm.OTPcode=t},updateStayLogin(e,t){e.stayLogin=t},updateTrustDevice(e,t){e.trustDevice=t},updateShowOTPField(e,t){e.showOTPField=t},updateNeedReloadTabs(e,t){e.needReloadTabs=t},updateActiveTabName(e,t){e.activeTabName=t},updateAppLoginStyle(e,t){e.appLoginStyle=t},updateEmail(e,t){e.email=t},updateDisableForm(e,t){e.disableForm=t},updateShowUpgradeMask(e,t){e.showUpgradeMask=t},updateOnLoginProcedure(e,t){e.onLoginProcedure=t},updateLoadPluginsPromise(e,t=Promise.resolve()){e.loadPluginsPromise=t},updateOtpUrl(e,t=null){e.otpUrl=t},updatePersonalUpdater(e,t){e.isNeedPersonalUpdater=t},loginPluginsLoaded(e,t){e.loginPluginsLoaded=t},updateAuthList(e,t=[]){e.authList=t},need2FA(e,t){e.need2FA=t},enableSpinning(e,t=!1){e.isSpinning=t},enableBombingOnDone(e,t=!1){e.isBombingOnDone=t},enableSpecificAccount(e,t=!0){e.isSpecificAccount=t},updateIsUseSSO(e,t){e.isUseSSO=t},updateIsUseSSOSAML(e,t){e.saml.isUse=t},updateIsUseSSOCAS(e,t){e.cas.isUse=t},updateSamlResponse(e,t){e.saml.response=t},updateCasTicket(e,t){e.cas.ticket=t},updateCasRedirectUrl(e,t){e.cas.redirect_url=t},updateOidcIsUse(e,t){e.oidc.isUse=t},updateOidcParams(e,t){e.oidc.params=t}},getters:{username:e=>e.dsmForm.username,password:e=>e.dsmForm.password,hostname:e=>Object.prototype.hasOwnProperty.call(e.tpl,"login_title")?e.tpl.login_title:"",enabledAuthList:e=>(e.loginPluginsLoaded,e.authList.filter((e=>SYNO.SDS.LoginPlugins.getPlugin(e.type))))},namespaced:!0,strict:!0},l={state:{qrcodeImg:"",secretKey:"",email:"",serverAddr:"",userDN:"",isLDAP:!1,account:""},mutations:{updateQrcodeImg(e,t){e.qrcodeImg=t},updateSecretKey(e,t){e.secretKey=t},updateEmail(e,t){e.email=t},updateServerAddr(e,t){e.serverAddr=t},updateUserDN(e,t){e.userDN=t},updateIsLDAP(e,t){e.isLDAP=t},updateAccount(e,t){e.account=t}},getters:{},namespaced:!0,strict:!0};let c;function d(){return t().use(n()),c||(c=new(n().Store)({modules:{mainPage:a,otpWizard:l}}))}var u=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"sds-login-reset-forgot-pwd-inst"}},[t("reset-forgot-pwd-page")],1)};u._withStripped=!0;var p={components:{ResetForgotPwdPage:r(909).default}},g=r(810),m=(0,g.Z)(p,u,[],!1,null,null,null);m.options.__file="src/ResetForgotPwdApp.vue";var h=m.exports;class S{constructor(e,t){this._itemCallback=this.getItemCallback(e),this._routes=this.getRoutes(t)}get id(){return"passwd"}get entry(){return"/signin/password"}get itemInfo(){return{iconPath:"webman/login/dist/assets/3a236916275f306825d5.png?inline",icon2xPath:"webman/login/dist/assets/fbfeb823259b714c6c23.png?inline",description:_T("login","plugin_password_desc"),callback:this._itemCallback}}get routes(){return this._routes}getItemCallback(e){return()=>{e.replace("/signin/password")}}getRoutes(e){return[{path:"/signin/password",component:()=>r.e(1).then(r.bind(r,1)),beforeEnter:function(t,s,n){""===e.state.mainPage.dsmForm.username?n("/signin"):n()}}]}}class f{constructor(e,t){this._itemCallback=this.getItemCallback(e),this._routes=this.getRoutes(t)}get id(){return"otp"}get entry(){return"/signin/otp"}get itemInfo(){return{iconPath:"webman/login/dist/assets/dd4d99313e7d895f16a4.png?inline",icon2xPath:"webman/login/dist/assets/4368a7914ca986f4a78a.png?inline",description:_T("login","plugin_otp_desc"),whitetip:_T("login","plugin_otp_tip"),callback:this._itemCallback}}get routes(){return this._routes}getItemCallback(e){return()=>{e.replace("/signin/otp")}}getRoutes(e){return[{path:"/signin/otp",component:()=>r.e(772).then(r.bind(r,772)),beforeEnter:function(t,s,n){""===e.state.mainPage.dsmForm.username?n("/signin"):n()}}]}}const v="undefined"!=typeof __PURE_ENV__&&__PURE_ENV__;var w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"sds-login-vue-inst"}},[s("transition",{attrs:{name:e.transitionName,mode:"out-in"}},[s("router-view",{ref:"view"})],1)],1)};w._withStripped=!0;var _={mixins:[{methods:{removeVueRouterHash(){("#/"===window.location.hash||window.location.hash.startsWith("#/signin"))&&history&&history.replaceState&&history.replaceState("",document.title,window.location.pathname+window.location.search)}}}],provide(){return{gotoDesktop:this.gotoDesktop,setSynoToken:this.setSynoToken}},data(){return{transitionName:"fade"}},computed:{...(0,s.mapState)("mainPage",{username:e=>e.dsmForm.username})},watch:{$route:{handler(e,t){"AccountPanel"===e.name?this.transitionName="none":this.transitionName="fade"},immediate:!0}},beforeDestroy(){let e=document.querySelectorAll(".grow-bg");for(let t of e)null!==t.offsetParent&&(t.style.transform="scale(1)",t.style.transition="transform 500ms");document.querySelectorAll(".login-btn-spinner-wrapper").forEach((e=>e.classList.add("fade-out")))},destroyed(){let e=this.$el;e.classList.add("fade-out"),e.addEventListener("transitionend",(function(t){t.target===e&&(SYNO.SDS.Utils.UserAgent.isIE||SYNO.SDS.Utils.UserAgent.isModernIE?e.parentNode.removeChild(e):e.remove())})),SYNO.SDS.LoginPlugins.release()},methods:{setSynoToken:function(e){SYNO.SDS.isEmpty(SYNO.SDS.Session)&&(SYNO.SDS.Session={}),e&&(SYNO.SDS.Session.SynoToken=encodeURIComponent(e),synowebapi&&synowebapi.env.setSynoToken(SYNO.SDS.Session.SynoToken))},gotoDesktop:function(e){e&&this.setSynoToken(e),(SYNO.SDS.Session.app_name||SYNO.SDS.Session.appName||SYNO.SDS.Session.appLoginStyle)&&this.saveUsername(),this.removeVueRouterHash(),SYNO.SDS.initData()},saveUsername:function(){localStorage.setItem("lastLoginUsername",this.username)}}},b=(0,g.Z)(_,w,[],!1,null,null,null);b.options.__file="src/App.vue";var y=b.exports;const P=new URLSearchParams(window.location.search);SYNO.SDS.Frameworks&&(SYNO.SDS.Frameworks.init(),SYNO.SDS.Frameworks.replace("vue","_LoginVue",t()),SYNO.SDS.Frameworks.replace("vue-router","_LoginVueRouter",i()),SYNO.SDS.Frameworks.replace("vuex","_LoginVuex",n())),SYNO.CreateLoginInstance=async function({goToPersonalUpdater:e=!1}={}){const s=document.createElement("meta");s.id="login-inject-viewport",s.setAttribute("name","viewport"),s.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1"),document.getElementsByTagName("head")[0].appendChild(s);const n=d(),o=function(){const e=d();t().use(i());const s=new(i())({routes:[{path:"/signin",component:()=>r.e(207).then(r.bind(r,207)),beforeEnter:function(t,s,n){e.state.mainPage.showUpgradeMask&&!1===SYNO.SDS.Session.dsm_upgrade_all_done&&-1!==SYNO.SDS.Session.dsm_upgrade_done_uptime?n("/upgrading"):(!1===SYNO.SDS.Session.dsm_upgrade_all_done&&-1===SYNO.SDS.Session.dsm_upgrade_done_uptime&&synowebapi.request({api:"SYNO.Core.Desktop.Upgrade",method:"done",version:1}),n())},children:[{name:"AccountPanel",path:"",component:()=>r.e(834).then(r.bind(r,834)),async beforeEnter(t,s,n){if(!e.state.mainPage.isSpecificAccount||_S("sso_default_login"))n();else{await e.state.mainPage.loadPluginsPromise;const t=e.getters["mainPage/enabledAuthList"],s=t[0]&&t[0].type||"passwd";let o=SYNO.SDS.LoginPlugins.getPlugin(s);o?n(o.entry):(SYNO.Debug.error(`No such plugin [${s}]`),n("/signin/password"))}}},{path:"/signin/select-auth",component:()=>r.e(586).then(r.bind(r,586)),beforeEnter:function(t,s,n){e.commit("mainPage/enableSpinning",!1),e.state.mainPage.dsmForm.username?n():n("/signin")}}]},{path:"/reset-forgot-pwd/:key",component:()=>Promise.resolve().then(r.bind(r,909)),beforeEnter:function(e,t,s){synowebapi.request({api:"SYNO.Auth.ForgotPwd",version:1,method:"get",params:e.params,callback:function(e,t){e?s():s("/signin")},scope:this})}},{path:"/forgot-pwd",component:()=>r.e(244).then(r.bind(r,244))},{name:"change-pwd",path:"/change-pwd",component:()=>r.e(715).then(r.bind(r,715)),beforeEnter:function(t,s,n){e.state.mainPage.dsmForm.username?n():n("/signin")}},{path:"/change-pwd/:tid",component:()=>r.e(715).then(r.bind(r,715))},{path:"/expired-pwd",redirect:"/change-pwd"},{path:"/upgrading",component:()=>r.e(933).then(r.bind(r,933)),beforeEnter:function(t,s,n){e.state.mainPage.showUpgradeMask&&!0!==SYNO.SDS.Session.dsm_upgrade_all_done?n():n("/signin")}},{path:"*",beforeEnter:function(e,t,s){const n=Object.fromEntries(new URLSearchParams(e.path.substring(1)));SYNO.SDS.SSOUtils.checkSynoSSORedirect(n)||s("/signin")}}]});return s.beforeEach(((e,t,s)=>{Object.keys(t.query).length>0&&0==Object.keys(e.query).length?s(Object.assign({},e,{query:t.query})):s()})),s}(),a=P.get("account");n.commit("mainPage/updatePersonalUpdater",e),a&&(n.commit("mainPage/enableSpecificAccount"),await n.dispatch("mainPage/fetchAuthList",a));const l=P.get("otp_url");l&&["https://securesignin.synology.com/otp/view","synology-securesignin://otp/view","synology-securesignin-cn://otp/view"].includes(l)&&n.commit("mainPage/updateOtpUrl",l),SYNO.SDS.LoginPlugins.register(S),SYNO.SDS.LoginPlugins.register(f);const c=async function({router:e,store:s}){try{const e=await async function(){return await synowebapi.promises.request({api:"SYNO.API.Auth.UIConfig",method:"get",version:1})}();await async function(e){let t=[],s=new Map;const r=(e,n)=>{if(s.has(e))return s.get(e);const o=n();return s.set(e,o),t.push(o),o};for(let t of e)void 0!==t.jsPath&&void 0!==t.version&&r(`${t.jsPath}/${t.version}`,(()=>new Promise(((e,s)=>{o(t.jsPath,t.version,e,s)})))),t.cssPath&&t.version&&r(`${t.cssPath}/${t.version}`,(()=>n(`${t.cssPath}?v=${t.version}`))),void 0!==t.texts&&(void 0===SYNO.SDS.Strings?SYNO.SDS.Strings=t.texts:Object.assign(SYNO.SDS.Strings,t.texts));return await Promise.all(t).then((()=>{i()})).catch((e=>{i(),SYNO.Debug.error(e)}))}(e)}catch(e){SYNO.Debug.error(e),i()}async function n(e=""){if(!e)return;const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("head")[0].appendChild(t),new Promise(((e,s)=>{t.addEventListener("load",e),t.addEventListener("error",s)}))}function o(e,t,s,n){let o=document.getElementsByTagName("head")[0],i=document.createElement("script"),r=e;r=`${e}?v=${t}`,i.type="text/javascript",i.onload=s,i.async=!0,i.onerror=n,i.src=r,o.appendChild(i)}function i(){let n=(t,s)=>{let{routes:n}=e.options,o=n.find((e=>e.path===t));void 0!==o&&(void 0===o.children?o.children=[s]:o.children.push(s),e.addRoutes([o]))},o=SYNO.SDS.LoginPlugins.loadPlugins(e,s,void 0,t(),{inPureEnv:v});for(let t in o){const s=o[t];if(s.routeOnly)e.addRoutes(s.routes);else for(let e of s.routes)n("/signin",e);SYNO.Debug.debug(`Login Plugin [${t}] loaded.`)}}}({router:o,store:n}).then((()=>n.commit("mainPage/loginPluginsLoaded",!0)));n.commit("mainPage/updateLoadPluginsPromise",c);const u=t().extend({store:n,router:o}).extend(y);SYNO.LoginInstance=new u({el:"#sds-login-vue"})},SYNO.ShowResetForgotPassword=function(){const e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.getElementsByTagName("head")[0].appendChild(e);const s=t().extend(h);SYNO.ResetForgotPwdInstance=new s({el:"#sds-login-reset-forgot-pwd"})}}()}();
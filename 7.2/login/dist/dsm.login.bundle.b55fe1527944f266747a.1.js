"use strict";(self.wpJsonpLogin=self.wpJsonpLogin||[]).push([[1],{295:function(e,t){t.Z={computed:{shouldUseMobileStyle(){return document.documentElement.offsetWidth<520}}}},152:function(e,t){t.Z={data(){return{showAppIcon:!1,showAppTitleImg:!1}},created(){this.detectPanelTitleType()},methods:{detectPanelTitleType(){this.tpl.has_custom_title||!this.hasTitleImgPath?this.showAppIcon=this.hasAppIconPath:this.showAppTitleImg=!0}},computed:{tpl(){return this.$store.state.mainPage.tpl},appLoginStyle(){return this.$store.state.mainPage.appLoginStyle},loginFieldsetCls(){return{"login-fieldset":!0}},hasAppIconPath(){return!!SYNO.SDS.Session.appIconPath},hasTitleImgPath(){return!!this.appLoginStyle.titleImgPath},mainColor(){if(this.appLoginStyle.mainColor)return this.appLoginStyle.mainColor},isPreview(){return this.$store.state.mainPage.tpl.preview},message(){return this.$store.state.mainPage.message},messageStyle(){return this.$store.state.mainPage.messageStyle},messageCls(){return"error"===this.messageStyle?"error":"info"},disableForm:{get(){return this.$store.state.mainPage.disableForm},set(e){this.$store.commit("mainPage/updateDisableForm",e)}}}}},1:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"login-tabs-content-wrapper"},[s("div",{staticClass:"tab-panel-title"},[e._v("\n      "+e._s(e.T("login","login_enter_password"))+"\n    ")]),e._v(" "),s("div",{class:e.loginFieldsetCls},[s("form",{attrs:{id:"dsm-pass-fieldset"},on:{submit:function(e){e.preventDefault(),e.stopPropagation()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onLogin.apply(null,arguments)}}},[s("input",{attrs:{name:"username",autocomplete:"username",tabindex:"-1",hidden:""},domProps:{value:e.username}}),e._v(" "),s("textfield",{ref:"password",staticClass:"password-field field",attrs:{type:"password",autofillname:"current-password",autocomplete:"current-password",placeholder:e.T("login","password"),bordercolor:e.mainColor,tabindex:0,"syno-id":"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),!e.isMobileDevice&&e.isAllowStaySignedIn?s("checkbox",{attrs:{label:e.T("login","rememberme"),tabindex:0},model:{value:e.stayLogin,callback:function(t){e.stayLogin=t},expression:"stayLogin"}}):e._e()],1)]),e._v(" "),e.shouldUseMobileStyle?s("div",{staticClass:"login-remain-section"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"login-msg-box",class:[e.messageCls],domProps:{innerHTML:e._s(e.message)}})]):e._e(),e._v(" "),s("next-btn",{ref:"nextBtn",attrs:{"is-mobile":e.shouldUseMobileStyle,tabindex:0,"syno-id":"password-panel-next-btn"},on:{"btn-click":e.onLogin}})],1),e._v(" "),s("div",{staticClass:"tab-footer"},[e.shouldUseMobileStyle?e._e():s("div",{staticClass:"login-remain-section"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"login-msg-box",class:[e.messageCls],domProps:{innerHTML:e._s(e.message)}})]),e._v(" "),e.enabledAuthList.length>1?s("div",{staticClass:"tab-footer-link-ct"},[s("router-link",{staticClass:"tab-footer-link try-other-ways",attrs:{to:"/signin/select-auth",replace:""}},[e._v("\n        "+e._s(e.T("login","other_ways"))+"\n      ")])],1):e._e(),e._v(" "),e.showForgotPwd?s("div",{staticClass:"tab-footer-link-ct"},[s("router-link",{staticClass:"tab-footer-link try-other-ways",attrs:{to:"/signin/select-auth",replace:""}},[e._v("\n        "+e._s(e.T("login","other_ways"))+"\n      ")])],1):s("div",{staticClass:"tab-footer-link-ct"},[s("a",{staticClass:"tab-footer-link try-other-ways",attrs:{href:"#/signin/select-auth"}},[e._v("\n        "+e._s(e.T("login","other_ways"))+"\n      ")])])])])};i._withStripped=!0;var n=s(294),o=s(404),a=s(152),l=s(295),r=s(527),c=s(431),d=s(718),p={name:"DSMPasswordPanel",components:{textfield:r.Z,checkbox:c.Z,"next-btn":d.Z},mixins:[a.Z,l.Z,o.Z],data(){return{showForgotPwd:1===_S("login_enable_fp")}},computed:{...(0,n.mapState)("mainPage",["activeTabName"]),...(0,n.mapGetters)("mainPage",["enabledAuthList"]),isMobileDevice(){return _S("isMobileDevice")},isAllowStaySignedIn(){return"no"!==_S("allow_stay_signed_in_option")},isLoginError(){return!!this.$store.state.mainPage.message},username(){return this.$store.state.mainPage.dsmForm.username},password:{get(){return this.$store.state.mainPage.dsmForm.password},set(e){this.$store.commit("mainPage/updateDsmPassword",e)}},stayLogin:{get(){return this.$store.state.mainPage.stayLogin},set(e){this.$store.commit("mainPage/updateStayLogin",e)}}},watch:{isLoginError(e){!0===e&&this.focusInput()},activeTabName(e){"dsmTabPanel"===e&&this.focusInput()}},beforeMount:function(){this.stayLogin="1"===SYNO.SDS.GetCookieByName("stay_login")},mounted(){this.autoFocus(),this.setStayLoginIfMobile(),this.setStayLoginIfFisrtDVA(),this.isAllowStaySignedIn||(this.stayLogin=!1)},methods:{onLogin(){this.$emit("do-login")},focusInput(){this.$refs.password.$refs.input.focus()},autoFocus:function(){document.activeElement.blur(),this.$nextTick((()=>{"dsmTabPanel"===this.activeTabName&&this.focusInput()}))},setStayLoginIfMobile(){this.isMobileDevice&&(this.stayLogin=!0)},setStayLoginIfFisrtDVA(){navigator.userAgent.includes("SurvLocalDisplay")&&null===SYNO.SDS.GetCookieByName("stay_login")&&(this.stayLogin=!0)}}},u=(0,s(810).Z)(p,i,[],!1,null,null,null);u.options.__file="src/components/auth/dsmPasswordPanel.vue";var h=u.exports},431:function(e,t,s){s.d(t,{Z:function(){return a}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-checkbox",class:e.fieldCls},[s("input",{ref:"input",attrs:{id:e._uid,type:"checkbox",autofocus:!!e.autofocus,disabled:e.disabled,tabindex:e.tabindex},domProps:{checked:e.value},on:{change:e.onChange,focus:e.onFocus,blur:e.onBlur}}),s("label",{staticClass:"box",attrs:{for:e._uid},on:{keydown:e.onLabelKeydown}}),s("label",{staticClass:"label",attrs:{for:e._uid}},[e._v(e._s(e.label))])])};i._withStripped=!0;var n={props:{value:Boolean,label:{type:String,default:""},autofocus:Boolean,disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0}},data(){return{isFocused:{type:Boolean,default:!1}}},computed:{fieldCls(){return{checked:this.value,focused:this.isFocused,disabled:this.disabled}}},methods:{focus(){this.$refs.input.focus()},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onChange(e){this.$emit("input",e.target.checked)},onLabelKeydown(e){switch(e.key){case"Enter":case" ":e.stopPropagation(),this.$refs.input.click()}}}},o=(0,s(810).Z)(n,i,[],!1,null,null,null);o.options.__file="src/components/checkbox.vue";var a=o.exports},718:function(e,t,s){s.d(t,{Z:function(){return r}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.show&&!e.isMobile?s("div",{class:e.btnCls,attrs:{role:"button",tabindex:e.innerTabIndex,"syno-id":e.synoId,"aria-label":e.T("login","sign_in")},on:{keyup:e.onKeyup,click:e.onClick}},[s("div",{staticClass:"login-btn-spinner-wrapper"},[s("spinner",{staticClass:"login-btn-spinner"})],1),e._v(" "),s("div",{staticClass:"login-btn-animation",class:e.pulseCls}),e._v(" "),s("div",{ref:"grow-bg",staticClass:"grow-bg"}),e._v(" "),s("div",{staticClass:"arrow"})]):e.show&&e.isMobile?s("div",{class:e.btnCls,attrs:{tabindex:e.innerTabIndex},on:{keyup:e.onKeyup,click:e.onClick}},[s("div",{staticClass:"login-btn-spinner-wrapper"},[s("spinner",{staticClass:"login-btn-spinner"})],1),e._v(" "),s("div",{staticClass:"btn-text"},[e._v("\n    "+e._s(e.btnText)+"\n  ")])]):e._e()};i._withStripped=!0;var n=s(719),o=s(404),a={components:{spinner:n.Z},mixins:[o.Z],props:{show:{type:Boolean,default:!0},tabindex:{type:Number,default:0},isMobile:{type:Boolean,default:!1},text:{type:String,default:""},synoId:{type:String,default:""}},data(){return{disabled:!1,pulseActive:!0,spinActive:!1}},computed:{btnCls(){return{"login-btn":!this.isMobile,"login-btn-mobile":this.isMobile,"app-custom":this.isCustomized,disable:this.disabled,spin:this.spinActive}},pulseCls(){return{"animation-active":this.pulseActive}},isCustomized(){return this.appLoginStyle&&this.appLoginStyle.mainColor&&"#"===this.appLoginStyle.mainColor[0]},appLoginStyle(){return this.$store.state.mainPage.appLoginStyle},onLoginProcedure:{get(){return this.$store.state.mainPage.onLoginProcedure},set(e){this.$store.commit("mainPage/updateOnLoginProcedure",e)}},innerTabIndex(){return!0===this.disabled?-1:this.tabindex},btnText(){return this.text?this.text:this.T("login","next")}},watch:{onLoginProcedure(e){this.spin(e)}},created(){this.initAppStyle(),!0===_S("preview")&&this.disable()},mounted(){this.calcLoginBtnGrowSize(),this.initResizeListener()},beforeDestroy(){window.removeEventListener("resize",this.calcLoginBtnGrowSize)},methods:{disable(){this.disabled=!0,this.pulseActive=!1,this.spinActive=!1},enable(){this.disabled=!1,this.pulseActive=!0,this.spinActive=!1},pulse(e){this.disabled=!1,this.spinActive=!e,this.pulseActive=e},spin(e){this.spinActive=e,this.pulseActive=!e},calcMainColor(e){if(e){let t=this.appLoginStyle.mainColor.replace("#","");return"rgba("+parseInt(3==t.length?t.slice(0,1).repeat(2):t.slice(0,2),16)+", "+parseInt(3==t.length?t.slice(1,2).repeat(2):t.slice(2,4),16)+", "+parseInt(3==t.length?t.slice(2,3).repeat(2):t.slice(4,6),16)+", "+e+")"}return this.appLoginStyle.mainColor},initAppStyle(){if(this.isCustomized){let e=document.createElement("style");e.appendChild(document.createTextNode(`.app-custom.login-btn{background-color:${this.calcMainColor()};box-shadow:0 5px 14px 0 ${this.calcMainColor(.34)}}`)),e.appendChild(document.createTextNode(`.app-custom.login-btn.login-btn-animation{background-color:${this.calcMainColor(.5)}}`)),e.appendChild(document.createTextNode(`.app-custom.login-btn-mobile{background-color:${this.calcMainColor()}}`)),e.appendChild(document.createTextNode(`.app-custom.login-btn.grow-bg{background-color:${this.calcMainColor()}}`)),document.getElementsByTagName("head")[0].appendChild(e)}},onKeyup(e){"Enter"!==e.code&&"Space"!==e.code||this.onClick()},onClick(){this.disabled||this.$emit("btn-click")},calcLoginBtnGrowSize(){let e=this.$refs["grow-bg"],t=Math.max(document.body.offsetHeight,document.body.offsetWidth)/36*2,s=1/t;e&&(e.style.height=36*t+"px",e.style.width=36*t+"px",e.style.top=-36*t/2+36+"px",e.style.left=-36*t/2+36+"px",e.style.transform="scale("+s+")")},initResizeListener:function(){window.addEventListener("resize",this.calcLoginBtnGrowSize)}}},l=(0,s(810).Z)(a,i,[],!1,null,null,null);l.options.__file="src/components/nextButton.vue";var r=l.exports}}]);
!function(e){function t(t){for(var s,n,a=t[0],i=t[1],r=0,l=[];r<a.length;r++)n=a[r],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&l.push(o[n][0]),o[n]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);for(c&&c(t);l.length;)l.shift()()}var s={},n={1:0},o={1:0};function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[];n[e]?t.push(n[e]):0!==n[e]&&{2:1,3:1,6:1}[e]&&t.push(n[e]=new Promise((function(t,s){for(var o=e+".style.css",i=a.p+o,r=document.getElementsByTagName("link"),l=0;l<r.length;l++){var c=(u=r[l]).getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===o||c===i))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){var u;if((c=(u=d[l]).getAttribute("data-href"))===o||c===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete n[e],p.parentNode.removeChild(p),s(a)},p.href=i,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){n[e]=0})));var s=o[e];if(0!==s)if(s)t.push(s[2]);else{var i=new Promise((function(t,n){s=o[e]=[t,n]}));t.push(s[2]=i);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=function(e){return a.p+"dsm.login.bundle."+{0:"a14a682d8c714db8a850",2:"f858f097e152553e708d",3:"386c9def7449873b3628",4:"6928208ca354b3a59af5",5:"289c3033f46c70d66aa1",6:"2774a026e5f9a7c3a757",7:"e999a7080586a48800e9",8:"ff41c7f0405c0d46ed56"}[e]+"."+e+".js"}(e);var c=new Error;r=function(t){l.onerror=l.onload=null,clearTimeout(d);var s=o[e];if(0!==s){if(s){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",c.name="ChunkLoadError",c.type=n,c.request=a,s[1](c)}o[e]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},a.m=e,a.c=s,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./webman/login/dist/",a.oe=function(e){throw console.error(e),e};var i=window.wpJsonpLogin=window.wpJsonpLogin||[],r=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=r;a(a.s=14)}([function(e,t,s){"use strict";function n(e,t,s,n,o,a,i,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):o&&(l=r?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}s.d(t,"a",(function(){return n}))},function(e,t){e.exports=Vuex},function(e,t){e.exports=Vue},function(e,t){e.exports=VueRouter},function(e,t,s){"use strict";t.a={methods:{T:(e,t)=>_T(e,t)||t,format:(...e)=>String.format.apply(String,e),htmlEncode:e=>e?String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e,htmlDecode:e=>e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&"):e}}},function(e,t,s){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"login-button",class:this.buttonClass,attrs:{type:"button"},on:{click:this.onClick}},[t("transition",{attrs:{name:"fade"}},[this.spin?t("spinner",{staticClass:"login-spinner"}):t("span",{staticClass:"text"},[this._t("default")],2)],1),this._v(" "),t("span",{staticClass:"invisible"},[this._t("default")],2)],1)};n._withStripped=!0;var o={components:{Spinner:s(8).a},props:{disabled:Boolean,color:{type:String,default:"blue"},size:{type:String,default:""},spin:{type:Boolean,default:!1}},computed:{buttonClass(){return[{[`login-button-${this.color}`]:this.color},{[`login-button-${this.size}`]:this.size},{disable:this.disabled},{spin:this.spin}]}},methods:{onClick(e){this.disabled||this.spin||this.$emit("click",e)}}},a=s(0),i=Object(a.a)(o,n,[],!1,null,null,null);i.options.__file="src/components/loginButton.vue";t.a=i.exports},function(e,t,s){},function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-textfield-wrapper"},[s("div",{staticClass:"login-textfield",class:{error:e.error}},[s("span",{class:e.icon,style:e.iconStyles}),e._v(" "),s("div",{staticClass:"input-container"},[s("input",{ref:"input",class:{"has-after-input":e.$slots["after-input"]},attrs:{"syno-id":e.synoId,type:e.type,placeholder:e.placeholder,enterkeyhint:e.enterkeyhint,autofocus:!!e.autofocus,name:e.autofillname,autocomplete:"off",disabled:e.disabled,tabindex:e.tabindex},domProps:{value:e.value},on:{focus:e.onFocus,input:e.onInput,keydown:e.onKeydown}}),e._v(" "),e._t("after-input")],2),e._v(" "),s("div",{staticClass:"border active-border",style:{background:e.bordercolor}}),e._v(" "),s("div",{staticClass:"border bottom-border"}),e._v(" "),s("div",{staticClass:"border error-border"})]),e._v(" "),e.withStrength?s("div",{directives:[{name:"show",rawName:"v-show",value:e.passwordStrenghLevel>-1,expression:"passwordStrenghLevel > -1"}],class:[{"login-password-strength":!0},{weak:0===e.passwordStrenghLevel},{medium:1===e.passwordStrenghLevel},{strong:2===e.passwordStrenghLevel}]},[s("div",{staticClass:"strength-block block-1"}),e._v(" "),s("div",{staticClass:"strength-block block-2"}),e._v(" "),s("div",{staticClass:"strength-block block-3"}),e._v(" "),s("span",[e._v(e._s(e.passwordStrengthText))])]):e._e()])};n._withStripped=!0;var o={props:{value:{type:String,default:""},enterkeyhint:{type:String,default:""},type:{type:String,default:""},icon:{type:Object,default:()=>({})},iconUri:{type:String,default:""},placeholder:{type:String,default:""},autofocus:Boolean,bordercolor:{type:String,default:""},autofillname:{type:String,default:""},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0},synoId:{type:String,default:""},withStrength:{type:Boolean,default:!1}},data:()=>({error:!1,passwordStrenghLevel:-1}),computed:{iconStyles(){let e={};return this.iconUri&&(e.backgroundImage="url("+this.iconUri+")"),e},passwordStrengthText(){const e=[_T("welcome","passwd_weak"),_T("welcome","passwd_medium"),_T("welcome","passwd_strong")];return this.passwordStrenghLevel<0||e.length<=this.passwordStrenghLevel?"":e[this.passwordStrenghLevel]}},watch:{value:((e,t=250)=>{let s;return function(...n){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e.apply(this,n)},t)}})((function(e=""){this.validate(),this.checkPasswordStrength()}),250)},methods:{onFocus(e){this.$emit("focus",e)},onInput(e){this.$emit("input",e.target.value)},onKeydown(e){"Enter"===e.key&&this.$emit("submit")},focus(){this.$refs.input.focus()},validate(){if(void 0!==this.value)return"password"===this.type||(this.error=!this.value,!this.error)},async checkPasswordStrength(){"password"===this.type&&this.withStrength&&(this.passwordStrenghLevel=await this.getPasswordStrengthLevel(this.value))},async getPasswordStrengthLevel(e=""){const{score:t}=await synowebapi.promises.request({api:"SYNO.Core.User.PasswordMeter",method:"evaluate",version:"1",encryption:["password"],params:{password:e}});return Math.floor(t/2)}}},a=s(0),i=Object(a.a)(o,n,[],!1,null,null,null);i.options.__file="src/components/textfield.vue";t.a=i.exports},function(e,t,s){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"login-spinner",attrs:{viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{staticClass:"login-spinner-g"},[t("circle",{staticClass:"login-spinner-circle",attrs:{cx:"33",cy:"33","stroke-width":5,r:30.5}})])])};n._withStripped=!0;s(15);var o=s(0),a=Object(o.a)({},n,[],!1,null,null,null);a.options.__file="src/components/spinner.vue";t.a=a.exports},function(e,t){e.exports="assets/2cdddedf4103b4ec91d8eb054709630d.png"},function(e,t){e.exports="assets/7a9e6824994734fc22353eef88d905c0.png"},function(e,t){e.exports="assets/58c0bbaa5606a68b2f01723d31d709d0.png"},function(e,t){e.exports="assets/6e2164894dcfa32061cbd4e528b6d145.png"},function(e,t,s){"use strict";s.r(t);var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-page-common-layout-container login-reset-forgot-password"},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t(this.step,{tag:"component",on:{"goto-step":this.onGotoStep}})],1)],1)};n._withStripped=!0;var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-perfect-scrollbar",[s("div",{staticClass:"step-change-pwd login-page-common-layout"},[s("div",{staticClass:"area-top"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[e._v("\n          "+e._s(e.T("login","change_pass_title"))+"\n        ")]),e._v(" "),s("div",{staticClass:"desc"},[e._v("\n          "+e._s(e.T("login","change_pass_desc"))+"\n        ")])])]),e._v(" "),s("div",{staticClass:"area-center"},[s("form",{staticClass:"common-simple-form"},[s("textfield",{ref:"newPass",attrs:{"with-strength":"",type:"password",placeholder:e.T("login","forget_pass_new_password")},on:{submit:e.onSubmit},model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}}),e._v(" "),s("textfield",{ref:"confirmPass",attrs:{type:"password",placeholder:e.T("login","forget_pass_comfirm_password")},on:{submit:e.onSubmit},model:{value:e.confirmPass,callback:function(t){e.confirmPass=t},expression:"confirmPass"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.confirmPassError,expression:"confirmPassError !== ''"}],staticClass:"confirm-pass-error",domProps:{innerHTML:e._s(e.confirmPassError)}}),e._v(" "),s("login-button",{attrs:{disabled:0==e.newPass.length||0==e.confirmPass.length||e.disableSubmit,spin:e.loading},on:{click:e.onSubmit}},[e._v("\n          "+e._s(e.T("login","submit"))+"\n        ")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.msgShow,expression:"msgShow"}],staticClass:"msg",class:e.msgCls},[s("div",{staticClass:"text",domProps:{innerHTML:e._s(e.msgText)}})])],1)]),e._v(" "),s("div",{staticClass:"area-bottom"},[s("p",[e._v(e._s(e.T("login","copyright").replace("{0}",(new Date).getFullYear())))])])])])};o._withStripped=!0;var a=s(4),i=s(7),r=s(5),l={components:{textfield:i.a,"login-button":r.a},mixins:[a.a],data:()=>({disableSubmit:!1,newPass:"",confirmPass:"",confirmPassError:"",msgText:"",msgCls:"",msgShow:!1,loading:!1}),computed:{key(){return this.$route.params.key}},watch:{confirmPassError(e){this.$refs.confirmPass.error=""!==e}},mounted(){this.$refs.newPass.focus()},methods:{onSubmit:function(){this.confirmPassError="",this.msgShow=!1,this.newPass===this.confirmPass?(this.loading=!0,this.disableSubmit=!0,synowebapi.request({api:"SYNO.Auth.ForgotPwd",version:1,method:"reset",params:{passwd:this.newPass,key:this.key},encryption:["passwd","key"],callback:function(e,t){var s=this.parseResponse(t);s.success?this.$emit("goto-step","step-change-success"):(this.setError(s.msg),this.loading=!1,this.disableSubmit=!1)},scope:this})):this.confirmPassError=this.T("login","forget_pass_comfirm_password_error")},parseResponse:function(e){var t=this.T("login","forget_pass_msg_error"),s=!1,n=e.msg,o=[];return"success"===n?(s=!0,t=this.T("login","forget_pass_change_pass_ok")):"weak password"===n?(o=[this.T("login","password_formation_rules"),this.T("login","need_longer_password"),this.T("login","exclude_username")],t=this.T("login","possible_reasons_are").replace("{0}",`<br/>${this.printUnorderedListTags(o)}`)):"weak password domain"===n?(o=[this.T("login","password_formation_rules"),this.T("login","need_longer_password"),this.T("login","exclude_common_password")],t=this.T("login","possible_reasons_are").replace("{0}",`<br/>${this.printUnorderedListTags(o)}`)):"ticket failed"===n?t=this.T("login","forget_pass_msg_incorrect_ticket"):n&&(t=this.T("login",n)||this.T("login","forget_pass_msg_error")),{success:s,msg:t}},setError:function(e,t){this.msgText=e||this.T("login","error_error_system"),this.msgCls=t||"error",this.msgShow=!0},setMsg:function(e,t){this.msgText=e,this.msgCls=t||"",this.msgShow=!0},printUnorderedListTags:function(e){return`<ul align="left">${e.reduce((e,t)=>`${e}<li>${t}</li>`,"")}</ul>`}}},c=s(0),d=Object(c.a)(l,o,[],!1,null,null,null);d.options.__file="src/components/resetforgotpwd/stepChangePwd.vue";var u=d.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-perfect-scrollbar",[s("div",{staticClass:"step-change-success login-page-common-layout"},[s("div",{staticClass:"area-top"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[e._v("\n          "+e._s(e.T("login","change_success_title"))+"\n        ")]),e._v(" "),s("div",{staticClass:"desc"},[e._v("\n          "+e._s(e.T("login","change_success_desc"))+"\n        ")])])]),e._v(" "),s("div",{staticClass:"area-center"},[s("div",{staticClass:"img-new-password-success"}),e._v(" "),s("login-button",{staticClass:"btn-login-now",on:{click:e.gotoLogin}},[e._v("\n        "+e._s(e.T("login","login_now"))+"\n      ")])],1),e._v(" "),s("div",{staticClass:"area-bottom"},[s("p",[e._v(e._s(e.T("login","copyright").replace("{0}",(new Date).getFullYear())))])])])])};p._withStripped=!0;var g={components:{"login-button":r.a},mixins:[a.a],methods:{gotoLogin:function(){window.location="/"}}},m=Object(c.a)(g,p,[],!1,null,null,null);m.options.__file="src/components/resetforgotpwd/stepChangeSuccess.vue";var h={components:{"step-change-pwd":u,"step-change-success":m.exports},data:()=>({step:"step-change-pwd"}),methods:{onGotoStep:function(e){this.step=e}}},f=Object(c.a)(h,n,[],!1,null,null,null);f.options.__file="src/pages/resetForgotPwdPage.vue";t.default=f.exports},function(e,t,s){e.exports=s(17)},function(e,t,s){"use strict";var n=s(6);s.n(n).a},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(2),o=s.n(n),a=s(1),i=s.n(a),r=s(3),l=s.n(r),c={state:{isNeedPersonalUpdater:!1,tpl:{},appLoginStyle:"",isSpecificAccount:!1,isSupportSSO:!1,isSupportOIDCSSO:!1,otpUrl:null,stayLogin:!1,trustDevice:!1,showOTPField:!1,message:"",messageStyle:"info",needReloadTabs:!1,activeTabName:"",disableForm:!1,showUpgradeMask:!0,onLoginProcedure:!1,isSpinning:!1,isBombingOnDone:!1,loadPluginsPromise:Promise.resolve(),loginPluginsLoaded:!1,dsmForm:{username:"",password:"",SSOToken:"",OTPcode:""},authList:[],need2FA:!1,selectAuthType:"",isUseSSO:!1,oidc:{isUse:!1,params:{}}},actions:{async fetchAuthList({dispatch:e,state:t,commit:s},n=""){let o;try{o=await synowebapi.promises.request({url:"webapi/entry.cgi",requestFormat:"raw",params:{api:"SYNO.API.Auth.Type",method:"get",version:1,account:n}})}catch(e){SYNO.Debug.error(e)}Array.isArray(o)&&o.length>0||(o=[{type:"passwd"}]),localStorage.removeItem("choseAuthType");let a=SYNO.SDS.PreferAuthType.Get(n);return a&&o.sort((e,t)=>e.type===a?-1:t.type==a?1:0),s("updateDsmUsername",n),await e("setAuthList",o),t.enabledAuthList},updateTpl({commit:e},t){e("updateTpl",new SYNO.SDS.LoginStyleParser({isPreview:t,isBusiness:SYNO.SDS.isBusinessModel}).getLoginConfig())},updateAppLoginStyle({commit:e}){SYNO.SDS.Session.appLoginStyle&&e("updateAppLoginStyle",SYNO.SDS.Session.appLoginStyle)},switchToTab({commit:e},t){e("updateActiveTabName",t),e("updateNeedReloadTabs",!0)},setErrorMessage({commit:e},t){e("updateMessage",t),e("updateMessageStyle","error")},setInfoMessage({commit:e},t){e("updateMessage",t),e("updateMessageStyle","info")},clearMessage({commit:e}){e("updateMessage",""),e("updateMessageStyle","info")},loginPluginsLoaded({commit:e},t){e("loginPluginsLoaded",t)},async setAuthList({commit:e,state:t},s=[]){e("updateAuthList",s)},setNeed2FA({commit:e},t){e("need2FA",t)},clearAuthInfo({commit:e}){e("need2FA",!1),e("updateAuthList",[]),e("updateDsmPassword",""),e("updateDsmSSOToken",""),e("updateDsmOTPcode",""),e("updateShowOTPField",!1),e("updateStayLogin",!1),e("updateTrustDevice",!1),e("updateIsUseSSO",!1),e("updateOidcIsUse",!1),e("updateOidcParams",{})},async needPersonalUpdate({commit:e}){const t=await synowebapi.promises.request({api:"SYNO.Core.Desktop.PersonalUpdater",method:"need_update",version:1}),s=SYNO.SDS.isCompatibleMode&&SYNO.SDS.isCompatibleMode();e("updatePersonalUpdater",t.need_update&&!s)}},mutations:{updateTpl(e,t){e.tpl=t},updateMessage(e,t){e.message=t},updateMessageStyle(e,t){e.messageStyle=t},updateSupportSSO(e,t){e.isSupportSSO=t},updateSupportOIDCSSO(e,t){e.isSupportOIDCSSO=t},updateDsmUsername(e,t){e.dsmForm.username=t},updateDsmPassword(e,t){e.dsmForm.password=t},updateDsmSSOToken(e,t){e.dsmForm.SSOToken=t},updateDsmOTPcode(e,t){e.dsmForm.OTPcode=t},updateStayLogin(e,t){e.stayLogin=t},updateTrustDevice(e,t){e.trustDevice=t},updateShowOTPField(e,t){e.showOTPField=t},updateNeedReloadTabs(e,t){e.needReloadTabs=t},updateActiveTabName(e,t){e.activeTabName=t},updateAppLoginStyle(e,t){e.appLoginStyle=t},updateDisableForm(e,t){e.disableForm=t},updateShowUpgradeMask(e,t){e.showUpgradeMask=t},updateOnLoginProcedure(e,t){e.onLoginProcedure=t},updateLoadPluginsPromise(e,t=Promise.resolve()){e.loadPluginsPromise=t},updateOtpUrl(e,t=null){e.otpUrl=t},updatePersonalUpdater(e,t){e.isNeedPersonalUpdater=t},loginPluginsLoaded(e,t){e.loginPluginsLoaded=t},updateAuthList(e,t=[]){e.authList=t},need2FA(e,t){e.need2FA=t},enableSpinning(e,t=!1){e.isSpinning=t},enableBombingOnDone(e,t=!1){e.isBombingOnDone=t},enableSpecificAccount(e,t=!0){e.isSpecificAccount=t},updateIsUseSSO(e,t){e.isUseSSO=t},updateOidcIsUse(e,t){e.oidc.isUse=t},updateOidcParams(e,t){e.oidc.params=t}},getters:{username:e=>e.dsmForm.username,password:e=>e.dsmForm.password,hostname:e=>Object.prototype.hasOwnProperty.call(e.tpl,"login_title")?e.tpl.login_title:"",enabledAuthList:e=>(e.loginPluginsLoaded,e.authList.filter(e=>SYNO.SDS.LoginPlugins.getPlugin(e.type)))},namespaced:!0,strict:!0},d={state:{qrcodeImg:"",secretKey:"",email:"",serverAddr:"",userDN:"",isLDAP:!1,account:""},mutations:{updateQrcodeImg(e,t){e.qrcodeImg=t},updateSecretKey(e,t){e.secretKey=t},updateEmail(e,t){e.email=t},updateServerAddr(e,t){e.serverAddr=t},updateUserDN(e,t){e.userDN=t},updateIsLDAP(e,t){e.isLDAP=t},updateAccount(e,t){e.account=t}},getters:{},namespaced:!0,strict:!0};let u;function p(){return o.a.use(i.a),u||(u=new i.a.Store({modules:{mainPage:c,otpWizard:d}}))}var g=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"sds-login-reset-forgot-pwd-inst"}},[t("reset-forgot-pwd-page")],1)};g._withStripped=!0;var m={components:{ResetForgotPwdPage:s(13).default}},h=s(0),f=Object(h.a)(m,g,[],!1,null,null,null);f.options.__file="src/ResetForgotPwdApp.vue";var S=f.exports,v=s(9),w=s.n(v),_=s(10),b=s.n(_);class y{constructor(e,t){this._itemCallback=this.getItemCallback(e),this._routes=this.getRoutes(t)}get id(){return"passwd"}get entry(){return"/signin/password"}get itemInfo(){return{iconPath:`webman/login/dist/${w.a}`,icon2xPath:`webman/login/dist/${b.a}`,description:_T("login","plugin_password_desc"),callback:this._itemCallback}}get routes(){return this._routes}getItemCallback(e){return()=>{e.replace("/signin/password")}}getRoutes(e){return[{path:"/signin/password",component:()=>s.e(4).then(s.bind(null,45)),beforeEnter:function(t,s,n){""===e.state.mainPage.dsmForm.username?n("/signin"):n()}}]}}var P=s(11),O=s.n(P),T=s(12),C=s.n(T);class N{constructor(e,t){this._itemCallback=this.getItemCallback(e),this._routes=this.getRoutes(t)}get id(){return"otp"}get entry(){return"/signin/otp"}get itemInfo(){return{iconPath:`webman/login/dist/${O.a}`,icon2xPath:`webman/login/dist/${C.a}`,description:_T("login","plugin_otp_desc"),callback:this._itemCallback}}get routes(){return this._routes}getItemCallback(e){return()=>{e.replace("/signin/otp")}}getRoutes(e){return[{path:"/signin/otp",component:()=>s.e(3).then(s.bind(null,46)),beforeEnter:function(t,s,n){""===e.state.mainPage.dsmForm.username?n("/signin"):n()}}]}}s(16);var L=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"sds-login-vue-inst"}},[t("transition",{attrs:{name:this.transitionName,mode:"out-in"}},[t("router-view",{ref:"view"})],1)],1)};L._withStripped=!0;var k={mixins:[{methods:{removeVueRouterHash(){("#/"===window.location.hash||window.location.hash.startsWith("#/signin"))&&history&&history.replaceState&&history.replaceState("",document.title,window.location.pathname+window.location.search)}}}],provide(){return{gotoDesktop:this.gotoDesktop,setSynoToken:this.setSynoToken}},data:()=>({transitionName:"fade"}),computed:{...Object(a.mapState)("mainPage",{username:e=>e.dsmForm.username})},watch:{$route:{handler(e,t){"AccountPanel"===e.name?this.transitionName="none":this.transitionName="fade"},immediate:!0}},beforeDestroy(){let e=document.querySelectorAll(".grow-bg");for(let t of e)null!==t.offsetParent&&(t.style.transform="scale(1)",t.style.transition="transform 500ms");document.querySelectorAll(".login-btn-spinner-wrapper").forEach(e=>e.classList.add("fade-out"))},destroyed(){let e=this.$el;e.classList.add("fade-out"),e.addEventListener("transitionend",(function(t){t.target===e&&(SYNO.SDS.Utils.UserAgent.isIE||SYNO.SDS.Utils.UserAgent.isModernIE?e.parentNode.removeChild(e):e.remove())})),SYNO.SDS.LoginPlugins.release()},methods:{setSynoToken:function(e){Ext.isEmpty(SYNO.SDS.Session)&&(SYNO.SDS.Session={}),e&&(SYNO.SDS.Session.SynoToken=encodeURIComponent(e),synowebapi&&synowebapi.env.setSynoToken(SYNO.SDS.Session.SynoToken))},gotoDesktop:function(e){e&&this.setSynoToken(e),(SYNO.SDS.Session.app_name||SYNO.SDS.Session.appName||SYNO.SDS.Session.appLoginStyle)&&this.saveUsername(),this.removeVueRouterHash(),SYNO.SDS.initData()},saveUsername:function(){localStorage.setItem("lastLoginUsername",this.username)}}},D=Object(h.a)(k,L,[],!1,null,null,null);D.options.__file="src/App.vue";var x=D.exports;const A=new URLSearchParams(window.location.search);SYNO.SDS.Frameworks&&(SYNO.SDS.Frameworks.replace("vue",o.a),SYNO.SDS.Frameworks.replace("vue-router",l.a),SYNO.SDS.Frameworks.replace("vuex",i.a)),SYNO.CreateLoginInstance=async function({goToPersonalUpdater:e=!1}={}){const t=document.createElement("meta");t.setAttribute("name","viewport"),t.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1"),document.getElementsByTagName("head")[0].appendChild(t);const n=p(),a=function(){const e=p();Vue.use(l.a);const t=new l.a({routes:[{path:"/signin",component:()=>s.e(2).then(s.bind(null,39)),beforeEnter:function(t,s,n){e.state.mainPage.showUpgradeMask&&!1===SYNO.SDS.Session.dsm_upgrade_all_done&&-1!==SYNO.SDS.Session.dsm_upgrade_done_uptime?n("/upgrading"):(!1===SYNO.SDS.Session.dsm_upgrade_all_done&&-1===SYNO.SDS.Session.dsm_upgrade_done_uptime&&synowebapi.request({api:"SYNO.Core.Desktop.Upgrade",method:"done",version:1}),n())},children:[{name:"AccountPanel",path:"",component:()=>s.e(5).then(s.bind(null,43)),async beforeEnter(t,s,n){if(e.state.mainPage.isSpecificAccount){await e.state.mainPage.loadPluginsPromise;const t=e.getters["mainPage/enabledAuthList"],s=t[0]&&t[0].type||"passwd";let o=SYNO.SDS.LoginPlugins.getPlugin(s);o?n(o.entry):(SYNO.Debug.error(`No such plugin [${s}]`),n("/signin/password"))}else n()}},{path:"/signin/select-auth",component:()=>s.e(6).then(s.bind(null,44)),beforeEnter:function(t,s,n){e.commit("mainPage/enableSpinning",!1),e.state.mainPage.dsmForm.username?n():n("/signin")}}]},{path:"/reset-forgot-pwd/:key",component:()=>Promise.resolve().then(s.bind(null,13)),beforeEnter:function(e,t,s){synowebapi.request({api:"SYNO.Auth.ForgotPwd",version:1,method:"get",params:e.params,callback:function(e,t){e?s():s("/signin")},scope:this})}},{path:"/forgot-pwd",component:()=>s.e(8).then(s.bind(null,41))},{name:"change-pwd",path:"/change-pwd",component:()=>s.e(0).then(s.bind(null,40)),beforeEnter:function(t,s,n){e.state.mainPage.dsmForm.username?n():n("/signin")}},{path:"/change-pwd/:tid",component:()=>s.e(0).then(s.bind(null,40))},{path:"/expired-pwd",redirect:"/change-pwd"},{path:"/upgrading",component:()=>s.e(7).then(s.bind(null,42)),beforeEnter:function(t,s,n){e.state.mainPage.showUpgradeMask&&!0!==SYNO.SDS.Session.dsm_upgrade_all_done?n():n("/signin")}},{path:"*",redirect:"/signin"}]});return t.beforeEach((e,t,s)=>{Object.keys(t.query).length>0&&0==Object.keys(e.query).length?s(Object.assign({},e,{query:t.query})):s()}),t}(),i=A.get("account");n.commit("mainPage/updatePersonalUpdater",e),i&&(n.commit("mainPage/enableSpecificAccount"),await n.dispatch("mainPage/fetchAuthList",i));const r=A.get("otp_url");if(r){["https://securesignin.synology.com/otp/view","synology-securesignin://otp/view","synology-securesignin-cn://otp/view"].includes(r)&&n.commit("mainPage/updateOtpUrl",r)}SYNO.SDS.LoginPlugins.register(y),SYNO.SDS.LoginPlugins.register(N);const c=async function({router:e,store:t}){try{const e=await async function(){return await synowebapi.promises.request({api:"SYNO.API.Auth.UIConfig",method:"get",version:1})}();await async function(e){let t=[],a=new Map;const i=(e,s)=>{if(a.has(e))return a.get(e);const n=s();return a.set(e,n),t.push(n),n};for(let t of e){if(void 0!==t.jsPath&&void 0!==t.version){const e=`${t.jsPath}/${t.version}`;i(e,()=>new Promise((e,s)=>{n(t.jsPath,t.version,e,s)}))}if(t.cssPath&&t.version){const e=`${t.cssPath}/${t.version}`;i(e,()=>s(`${t.cssPath}?v=${t.version}`))}void 0!==t.texts&&(void 0===SYNO.SDS.Strings?SYNO.SDS.Strings=t.texts:Object.assign(SYNO.SDS.Strings,t.texts))}return await Promise.all(t).then(()=>{o()}).catch(e=>{o(),SYNO.Debug.error(e)})}(e)}catch(e){SYNO.Debug.error(e),o()}async function s(e=""){if(!e)return;const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("head")[0].appendChild(t),new Promise((e,s)=>{t.addEventListener("load",e),t.addEventListener("error",s)})}function n(e,t,s,n){let o=document.getElementsByTagName("head")[0],a=document.createElement("script"),i=e;i=`${e}?v=${t}`,a.type="text/javascript",Ext.isIE?(a.onready=s,a.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||this.onready()}):a.onload=s,a.async=!0,a.onerror=n,a.src=i,o.appendChild(a)}function o(){let s=(t,s)=>{let{routes:n}=e.options,o=n.find(e=>e.path===t);void 0!==o&&(void 0===o.children?o.children=[s]:o.children.push(s),e.addRoutes([o]))},n=SYNO.SDS.LoginPlugins.loadPlugins(e,t);for(let t in n){const o=n[t];if(o.routeOnly)e.addRoutes(o.routes);else for(let e of o.routes)s("/signin",e);SYNO.Debug.debug(`Login Plugin [${t}] loaded.`)}}}({router:a,store:n}).then(()=>n.commit("mainPage/loginPluginsLoaded",!0));n.commit("mainPage/updateLoadPluginsPromise",c);const d=o.a.extend({store:n,router:a}).extend(x);SYNO.LoginInstance=new d({el:"#sds-login-vue"})},SYNO.ShowResetForgotPassword=function(){const e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0"),document.getElementsByTagName("head")[0].appendChild(e);const t=o.a.extend(S);SYNO.ResetForgotPwdInstance=new t({el:"#sds-login-reset-forgot-pwd"})}}]);